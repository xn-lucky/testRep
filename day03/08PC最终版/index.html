<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>尚品汇</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/index.css">
</head>

<body>

    <div id="outer">
        <!-- 侧边栏 -->
        <div id="sideBar">
            <div class="sideCon"></div>
            <div class="sidemenu"></div>
            <ul>
                <li>
                    <i></i>
                    <p>商品会员</p>
                </li>
                <li>
                    <i></i>
                    <p>购物车</p>
                </li>
                <li>
                    <i></i>
                    <p>我的关注</p>
                </li>
                <li>
                    <i></i>
                    <p>我的足迹</p>
                </li>
                <li>
                    <i></i>
                    <p>我的消息</p>
                </li>
            </ul>
            <div class="backTop">
                <i></i>
                <p>回到顶部</p>
            </div>
        </div>
        <div id="header">
            <div id="headerTop_out">
                <div class="headerTop">
                    <div class="headerTop_left">
                        <p>尚品汇欢迎您 !</p>
                        <p>
                            请
                            <a href="javascript:;">登录</a>
                            <a href="javascript:;">免费注册</a>
                        </p>
                    </div>
                    <div class="headerTop_right">
                        <a href="javascript:;">我的订单</a>
                        <a href="javascript:;">我的购物车</a>
                        <a href="javascript:;">我的尚品汇</a>
                        <a href="javascript:;">尚品汇会员</a>
                        <a href="javascript:;">企业采购</a>
                        <a href="javascript:;">关注尚品汇</a>
                        <a href="javascript:;">合作招商</a>
                        <a href="javascript:;">商家后台</a>
                    </div>
                </div>
            </div>
            <div class="headerBottom">
                <h1 class="logo">
                    <img src="./img/Logo.png" alt="">
                </h1>
                <div class="search">
                    <input type="text">
                    <button>搜索</button>
                </div>
            </div>
        </div>
        <div id="allNav_out">
            <div class="allNav">
                <h2>全部商品分类</h2>
                <nav class="list">
                    <a href="javascript:;">服装城</a>
                    <a href="javascript:;">美妆馆</a>
                    <a href="javascript:;">尚品汇超市</a>
                    <a href="javascript:;">全球购</a>
                    <a href="javascript:;">闪购</a>
                    <a href="javascript:;">团购</a>
                    <a href="javascript:;">有趣</a>
                    <a href="javascript:;">秒杀</a>
                </nav>
            </div>
        </div>
        <div id="content">
            <p class="conPoint">
                <!-- 手机类型指针 -->
            </p>
            <div class="mainCon">
                <div class="mainCon_left">
                    <div class="smallArea">
                        <div class="smallImg">
                            <img src="" alt="">
                            <!-- 放蒙版 也是鼠标移入的时候创建 -->
                            <!-- <div class="mask"></div> -->
                        </div>
                        <!-- 放大图 等用到的时候在创建-->
                        <!-- <div class="bigImg">     
                              <img src="./img/b1.png" alt="">
                        </div> -->
                    </div>
                    <div class="preList">
                        <p class="btn_left">&lt;</p>
                        <div class="listOut">
                            <ul class="list">
                                <!-- 缩略图 -->
                            </ul>
                        </div>
                        <p class="btn_right">&gt;</p>
                    </div>
                </div>
                <div class="mainCon_right">
                    <!-- 商品右侧区域 -->
                </div>
            </div>
        </div>
        <div id="bottom">
            <div class="bottom_left">
                <div class="tabTitle">
                    <h4 class="active">相关分类</h4>
                    <h4>推荐品牌</h4>
                </div>
                <div class="tabContent">
                    <div class="tab active">
                        <ul class="list">
                            <li>手机</li>
                            <li>手机壳</li>
                            <li>内存卡</li>
                            <li>iPhone配件</li>
                            <li>贴膜</li>
                            <li>手机耳机</li>
                            <li>移动电源</li>
                            <li>平板电脑</li>
                        </ul>
                        <ul class="imgList">
                            <li>
                                <img src="./img/part01.png" alt="">
                                <h5>Apple苹果iPhone 6s (A1699)</h5>
                                <p>¥6088.00</p>
                                <a href="jacascript:;">加入购物车</a>
                            </li>
                            <li>
                                <img src="./img/part02.png" alt="">
                                <h5>Apple苹果iPhone 6s (A1699)</h5>
                                <p>¥6088.00</p>
                                <a href="jacascript:;">加入购物车</a>
                            </li>
                            <li>
                                <img src="./img/part03.png" alt="">
                                <h5>Apple苹果iPhone 6s (A1699)</h5>
                                <p>¥6088.00</p>
                                <a href="jacascript:;">加入购物车</a>
                            </li>
                            <li>
                                <img src="./img/part01.png" alt="">
                                <h5>Apple苹果iPhone 6s (A1699)</h5>
                                <p>¥6088.00</p>
                                <a href="jacascript:;">加入购物车</a>
                            </li>

                        </ul>
                    </div>
                    <div class="tab">
                        <ul class="list">
                            <li>推荐品牌</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="bottom_right">
                <div class="chooseCollocation">
                    <h5 class="title">选择搭配</h5>
                    <div class="content">
                        <div class="conLeft">
                            <img src="./img/l-m01.png" alt="">
                            <span>￥5299</span>
                            <i>+</i>
                        </div>
                        <ul class="conMid">
                            <li>
                                <img src="./img/dp01.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value="39">
                                    <span>39</span>
                                </label>
                            </li>
                            <li>
                                <img src="./img/dp02.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value="39">
                                    <span>39</span>
                                </label>
                            </li>
                            <li>
                                <img src="./img/dp03.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value="39">
                                    <span>39</span>
                                </label>
                            </li>
                            <li>
                                <img src="./img/dp04.png" alt="">
                                <p>Feless费勒斯VR</p>
                                <label>
                                    <input type="checkbox" value="39">
                                    <span>39</span>
                                </label>
                            </li>
                        </ul>
                        <div class="conRight">
                            <div class="havePay">已选购0件商品</div>
                            <p>套餐价</p>
                            <p class="price">￥5299</p>
                            <strong>加入购物车</strong>
                        </div>
                    </div>
                </div>
                <div class="tabDetail">
                    <ul class="tabTitle">
                        <li class="active">
                            <a href="javascript:;">商品介绍</a>
                        </li>
                        <li>
                            <a href="javascript:;">规格与包装</a>
                        </li>
                        <li>
                            <a href="javascript:;">售后保障</a>
                        </li>
                        <li>
                            <a href="javascript:;">商品评价</a>
                        </li>
                        <li>
                            <a href="javascript:;">手机社区</a>
                        </li>
                    </ul>
                    <div class="tabContent">
                        <div class="tab active">
                            <ul class='goodInfo'>
                                <li>分辨率：1920*1080(FHD)</li>
                                <li>后置摄像头：1200万像素</li>
                                <li>前置摄像头：500万像素</li>
                                <li>核 数：其他</li>
                                <li>频 率：以官网信息为准</li>
                                <li>品牌： Apple</li>
                                <li>商品名称：APPLEiPhone 6s Plus</li>
                                <li>商品编号：1861098</li>
                                <li>商品产地：中国大陆</li>
                                <li>商品毛重：0.51kg</li>
                                <li>热点：指纹识别，Apple Pay，金属机身，拍照神器</li>
                                <li>系统：苹果（IOS）</li>
                                <li>像素：1000-1600万品毛重：0.51kg</li>
                                <li>机身内存：64GB</li>
                            </ul>
                            <div class="imgInfo">
                                <img src="./img/intro01.png" alt="">
                                <img src="./img/intro02.png" alt="">
                                <img src="./img/intro03.png" alt="">

                            </div>
                        </div>
                        <div class="tab">
                            <ul class='goodInfo'>
                                <li>规格</li>
                                <li>包装</li>
                                <li>规格</li>
                                <li>包装</li>
                            </ul>
                        </div>
                        <div class="tab">
                            <ul class='goodInfo'>
                                <li>售后</li>
                                <li>保障</li>
                            </ul>
                        </div>
                        <div class="tab">
                            <ul class='goodInfo'>
                                <li>商品</li>
                                <li>评价</li>

                            </ul>
                        </div>
                        <div class="tab">
                            <ul class='goodInfo'>
                                <li>手机</li>
                                <li>社区</li>

                            </ul>
                        </div>
                    </div>

                </div>

            </div>

        </div>

    </div>

    <script src="./js/data.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', function () {
            /* 
              根据缩略图的个数动态生成li,数据从data.js中获取
            */

            //用于保存缩略图点击的下标及默认值
            var chooseThumbnailIndex = 0;
            //用于保存选择的商品数量,最小值为1
            var chooseGoodsCount = 1;
            //定义数组用于保存搭配点击事件中的值
            var inputArr = new Array(4);
            inputArr.fill(0);

            //开始导入动态数据
            loadData();
            //放大镜区域
            magnifier();
            //缩略图
            thumbnail();
            //右侧商品类型选择
            oAllDdClick();
            //计算数量增加或减少时的价格
            goodsCountPrice();

            //下面左右的选项卡切换
            //使用面向对象的方式，即以后若选项卡的项增多，直接new就可以，公有的方法设置在构造函数的原型对象上，这边传递的参数是按钮和内容的集合
            //首先需要获取的是，选项的按钮，对应展示的内容区域
            doTab();

            //计算选择搭配的价格
            chooseCollocation();

            //侧边栏
            sideBar();

            function loadData() {
                //根据数据加载 放大镜上方的 手机类型指针
                contentConPoint();
                //根据动态数据，加载放大镜、缩略图区域，及给每个缩略图绑定事件
                mainConLeftData();
                //根据动态数据，加载商品右侧区域
                mainConRightData();

            }

            function contentConPoint() {
                var oConPoint = document.querySelector('#content .conPoint');
                //获取数据,是一个数组，遍历创建a标签
                var conPointArr = goodData.path;
                conPointArr.forEach(function (item) {
                    //创建a标签
                    var newA = document.createElement('a');
                    if (item.url) {
                        newA.href = item.url;
                    }
                    newA.innerHTML = item.title;
                    oConPoint.appendChild(newA);
                })
            }

            function mainConLeftData() {
                //获取ul
                var oList = document.querySelector('.listOut .list');
                //获取小图元素
                var oImg = document.querySelector('.smallImg img');
                //获取动态数据
                var oDataImgs = goodData.imgsrc;

                oDataImgs.forEach(function (item, index) {
                    //创建li
                    var newLi = document.createElement('li');
                    //创建li中的img标签
                    var newImg = new Image();
                    newImg.src = item.s;

                    newLi.appendChild(newImg);
                    oList.appendChild(newLi);
                });
                //默认值，第一张图片
                oImg.src = oDataImgs[chooseThumbnailIndex].s;

                //给每个li绑定一个点击事件
                var oListLis = document.querySelectorAll('.listOut .list li');

                oListLis.forEach(function (item, index) {
                    //给每个li绑定一个下标index,为了鼠标移入的时候，可以确定是点击的是哪个元素，从而知道是哪张照片,但是这边定义下标，大图那边获取不到，所以设置一个全局变量，这边判断是选择了哪个，大图那边就设置哪个
                    item.onclick = function () {
                        chooseThumbnailIndex = index;
                        oImg.src = oDataImgs[index].s;
                    }
                })
            }

            function mainConRightData() {
                // --- 右侧上半部分

                //首先获取数据
                var rightData = goodData.goodsDetail;
                var oMainCon_right = document.querySelector('.mainCon_right');

                //用于保存右侧的数据，可以写标签,因为会有换行可以直接使用+连接或者转义符\,但是都需要考虑单引号嵌套双引号的问题，所以可以直接使用模板字符串,不需要考虑其他,也可以直接插入值
                var str = `<h3 class="title">${rightData.title}</h3>
                    <p class="con">${rightData.recommend}</p>
                    <div class="price">
                        <div class="priceDetail">
                            <p>价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</p>
                            <p>￥<span>${rightData.price}</span><span>降价通知</span></p>
                        </div>
                        <div class="priceSale">
                            <p>促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</p>
                            <p><span>${rightData.promoteSales.type}</span>${rightData.promoteSales.content}</p>
                        </div>
                    </div>
                    <div class="address">
                        <div class="addressSale">
                            <p>支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</p>
                            <p>${rightData.support}</p>
                        </div>
                        <div class="addressDetail">
                            <p>配&nbsp;送&nbsp;至</p>
                            <p>${rightData.address}</p>
                        </div>
                    </div>
                    <div class="chooseInfo"></div>
                    <div class="modelType">
                    </div>
                    <div class="buy">
                        <div class="num">
                            <input type="text" value="1">
                            <div class="opretion">
                                <button class="add">+</button>
                                <button class="produce">-</button>
                            </div>
                        </div>
                        <p>加入购物车</p>
                    </div>`;

                //将拼接的数据放到指定位置
                oMainCon_right.innerHTML = str;

                // ---- 右侧下半部分 选择区域

                //首先遍历创建dl,dt,dd
                var dataRightBottom = rightData.crumbData;
                var oModelType = document.querySelector('.mainCon_right .modelType');
                dataRightBottom.forEach(function (item, index) {
                    var oDl = document.createElement('dl');
                    var oDt = document.createElement('dt');
                    oDt.innerHTML = item.title;
                    oDl.appendChild(oDt);
                    //dd根据item中的data进行遍历
                    item.data.forEach(function (item) {
                        var oDd = document.createElement('dd');
                        oDd.innerHTML = item.type;
                        //创建dd的时候，将价格放到自定义的属性上保存，方便后面计算
                        oDd.dataset.changePrice = item.changePrice;

                        oDl.appendChild(oDd);
                    })
                    //将创建好的dl放到指定位置
                    oModelType.appendChild(oDl);
                })
            }

            /* 
           需求：小图的上面，鼠标移入的时候，有一个蒙版，蒙版走过的区域在右边有大图可以进  行展示。
         */

            function magnifier() {
                //获取左部分元素
                var oSmallArea = document.querySelector('.smallArea');

                //获取小图元素
                var oSmallImg = document.querySelector('.smallImg');
                //鼠标移入事件
                oSmallArea.onmouseenter = function (e) {
                    //1、鼠标移入的时候创建蒙版和大图区域(div中包含img)

                    //创建蒙版并添加
                    var newMask = document.createElement('div');
                    //添加类名使用className,但是这个类型只能添加一个，后面修改的话会把之前的都覆盖了，要想类名比较多的话，可以使用classList,有add remove等方法。
                    newMask.className = 'mask';
                    //将蒙版添加到指定位置
                    oSmallImg.appendChild(newMask);

                    //创建大图区域并添加
                    var newBigImg = document.createElement('div');
                    newBigImg.className = 'bigImg';
                    var newImg = new Image();
                    //大图区域，默认值也是第一张的大图
                    newImg.src = goodData.imgsrc[chooseThumbnailIndex].b;
                    newBigImg.appendChild(newImg);
                    //将放大图片元素放到左边区域
                    oSmallArea.appendChild(newBigImg);

                    //给小图区域绑定鼠标移动事件
                    oSmallArea.onmousemove = function (e) {

                        //获取鼠标到 到放大镜边缘的距离 = 鼠标到窗口的距离 - 小图区域到窗口的距离
                        var mouseToSmall = {
                            x: e.clientX - oSmallArea.getBoundingClientRect().left,
                            y: e.clientY - oSmallArea.getBoundingClientRect().top
                        }
                        //因为鼠标一直要保持在蒙版的中心，所以获取蒙版的一半
                        var mouseToMask = {
                            x: newMask.offsetWidth / 2,
                            y: newMask.offsetHeight / 2
                        }

                        //最后元素定位
                        var resultPoint = {
                            x: mouseToSmall.x - mouseToMask.x,
                            y: mouseToSmall.y - mouseToMask.y
                        }

                        //临界值判断
                        if (resultPoint.x >= oSmallArea.clientWidth - newMask.offsetWidth) {
                            resultPoint.x = oSmallArea.clientWidth - newMask.offsetWidth;
                        } else if (resultPoint.x <= 0) {
                            resultPoint.x = 0
                        }

                        if (resultPoint.y >= oSmallArea.clientHeight - newMask.offsetHeight) {
                            resultPoint.y = oSmallArea.clientHeight - newMask.offsetHeight;
                        } else if (resultPoint.y <= 0) {
                            resultPoint.y = 0
                        }
                        newMask.style.left = resultPoint.x + 'px';
                        newMask.style.top = resultPoint.y + 'px';

                        //计算比例值， 小图走的/小图可以走的 = 大图走的/大图可以走的
                        var oBigArea = document.querySelector('.bigImg');
                        var oBigImgs = document.querySelector('.bigImg img');

                        var scale = (oBigImgs.offsetWidth - oBigArea.clientWidth) / (oSmallArea
                            .clientWidth - newMask.offsetWidth);


                        //大图走的距离
                        var bigLength = {
                            x: resultPoint.x * scale,
                            y: resultPoint.y * scale
                        }
                        oBigImgs.style.left = -bigLength.x + 'px';;
                        oBigImgs.style.top = -bigLength.y + 'px';;

                    }

                    //移出事件，将鼠标移入时创建的，怎么创建就怎么移除
                    oSmallArea.onmouseleave = function () {
                        //删除蒙版
                        oSmallImg.removeChild(newMask);
                        //删除大图
                        oSmallArea.removeChild(newBigImg);

                    }
                }
            }

            function thumbnail() {
                //获取左右按钮
                var oLeftBtn = document.querySelector('.btn_left');
                var oRightBtn = document.querySelector('.btn_right');

                var oListOut = document.querySelector('.listOut');
                //获取ul
                var oList = document.querySelector('.listOut .list');
                //获取li
                var oListLis = document.querySelectorAll('.listOut .list li');

                //与轮播图类似
                //1、开始位置
                var tempLength = 0;
                //2、每次走的距离(两个li的距离)
                var everyLength = oListLis[0].offsetWidth * 2;
                //3、页面上已经显示的图片的个数
                var count = 5;

                //可以走的距离
                var allLength = (oListLis.length - count) * oListLis[0].offsetWidth;

                //右边按钮点击事件
                oRightBtn.onclick = function () {
                    if ((allLength - tempLength) >= everyLength) {
                        tempLength += everyLength;
                    } else {
                        tempLength = allLength;
                    }
                    // 点击一下走的距离赋值
                    oList.style.transform = 'translateX(-' + tempLength + 'px)';
                }

                //左边按钮点击事件
                oLeftBtn.onclick = function () {
                    if (tempLength >= everyLength) {
                        tempLength -= everyLength;
                    } else {
                        tempLength = 0;
                    }
                    // 点击一下走的距离赋值
                    oList.style.transform = 'translateX(-' + tempLength + 'px)';
                }
            }

            /* 
              商品选择:
                - 给每个dl中的dd绑定点击事件（dl分开）
                - 新建一个数组保存每个类型中的数据，开始默认值都为0。
                - 每点击一次dd，就将 数组中的值替换一次，然后将数组循环，插入到指定位置

            */
            function oAllDdClick() {
                //获取所有dl
                var oAllDl = document.querySelectorAll('.modelType dl');
                //数组中保存的是每个dl中选中的数据，默认值为0
                var arr = new Array(4);
                arr.fill(0); //这个是指将数组用0填满

                oAllDl.forEach(function (item, index) {
                    item.index = index;
                    //item就是每个dl
                    //获取dd
                    var oEveryDlDd = item.querySelectorAll('dd');
                    //遍历给每个dd绑定点击事件
                    oEveryDlDd.forEach(function (item, index) {
                        item.onclick = function () {

                            //首先将每个dd上的样式清空
                            oEveryDlDd.forEach(function (item) {
                                item.style.color = '#666';
                            })
                            item.style.color = 'tomato';
                            // 向数组中添加对应dl下的dd的信息
                            arr[item.parentNode.index] = item;

                            //点击将对应数据放到数组中后，需要遍历数组，对于有值得创建到显示页面上
                            //获取元素
                            var oChooseInfo = document.querySelector('.chooseInfo');
                            //每次添加之前，要先将页面上的数据删掉，否则会重复
                            oChooseInfo.innerHTML = '';
                            arr.forEach(function (item, index) {
                                if (item) {
                                    //如果有数据
                                    var newSpan = document.createElement('span');
                                    newSpan.innerHTML = item.innerHTML;

                                    //创建a标签，目的写删除功能
                                    var newA = document.createElement('a');
                                    newA.innerHTML = 'X';
                                    //点击的时候，给每个dd的上面扩充一个dl的下标，就是确定你选择的dd是属于哪个的dl的
                                    newA.dataset.dlIndex = index;

                                    newSpan.appendChild(newA);
                                    //将span添加到指定位置
                                    oChooseInfo.appendChild(newSpan);
                                }

                            })
                            //给每一个a绑定点击事件，点击的时候删除数组中的对应数据即页面上对应dl上显示的值应该改为默认值
                            var oA = oChooseInfo.querySelectorAll('span a');

                            oA.forEach(function (item, index) {
                                item.onclick = function () {

                                    //item为a标签，要删掉的是a的父元素标签
                                    item.parentNode.parentNode.removeChild(item
                                        .parentNode);

                                    //删除数组中的元素
                                    arr[item.dataset.dlIndex] = 0;
                                    //将删掉的那个dl中的dd默认值改为第一个
                                    //获取dd
                                    var nowDd = oAllDl[item.dataset.dlIndex]
                                        .getElementsByTagName('dd');
                                    //清空所有样式
                                    Array.from(nowDd).forEach(function (item) {
                                        item.style.color = '#666';
                                    })
                                    nowDd[0].style.color = 'tomato';
                                    //计算价格
                                    calcPrice(arr);
                                }
                            })
                            //计算价格
                            calcPrice(arr);
                        }
                    })

                })
            }

            /* 
              计算价格：
                 1、每次点击dd，和删除标签 的时候，价格有变动。
                 2、购物车的数量变动时，价格也会有变动。

                在创建dd的时候，可以给dd添加一个自定义属性来保存，每个点击的内容的价格，方便后面计算 
            */
            //计算价格 1
            function calcPrice(arr) {
                //获取选择搭配左侧的价格
                var leftPrice = document.querySelector('.bottom_right .chooseCollocation .conLeft span');
                //获取放价格的地方
                var oPriceDetail = document.querySelector('.priceDetail span');
                //获取初始价格(这边要注意，获取价格的时候，要计算数量)
                var startPrice = goodData.goodsDetail.price * chooseGoodsCount;
                arr.forEach(function (item) {
                    if (item) {
                        // debugger
                        startPrice += parseInt(item.dataset.changePrice) * chooseGoodsCount;
                    }
                })
                oPriceDetail.innerHTML = startPrice;
                leftPrice.innerHTML = '￥' + startPrice;
                //循环得出搭配选项中的总价
                inputAllPrice(startPrice);
            }
            //计算价格 2
            function goodsCountPrice() {
                //获取选择搭配左侧的价格
                var leftPrice = document.querySelector('.bottom_right .chooseCollocation .conLeft span');
                //首先给数量的+-绑定点击事件
                var oAdd = document.querySelector('.num .opretion .add');
                var oProduce = document.querySelector('.num .opretion .produce');
                //获取输入框的值
                var oInput = document.querySelector('.num input[type=text]');
                //定义一个变量，用来计算数量累加
                var count = oInput.value;
                //用于保存最后结果的价格
                var resultPrice = null;
                //加法
                oAdd.onclick = function () {
                    count++;
                    //计算价钱 使用单价去乘以数量
                    //首先要获取的是初始价格（在选择完类型后的价格）
                    var oPriceDetail = document.querySelector('.priceDetail span');
                    resultPrice = (+oPriceDetail.innerHTML) / (count - 1) * count;
                    oPriceDetail.innerHTML = resultPrice;

                    chooseGoodsCount = oInput.value = count;
                    leftPrice.innerHTML = '￥' + resultPrice;
                    //循环得出搭配选项中的总价
                    inputAllPrice(resultPrice);

                }
                //减法
                oProduce.onclick = function () {
                    count--;
                    if (count < 1) {
                        count = 1;
                        return;
                    }
                    //计算价钱 使用单价去乘以数量
                    //首先要获取的是初始价格（在选择完类型后的价格）
                    var oPriceDetail = document.querySelector('.priceDetail span');
                    resultPrice = (+oPriceDetail.innerHTML) / (count + 1) * count;
                    oPriceDetail.innerHTML = resultPrice;

                    chooseGoodsCount = oInput.value = count;
                    leftPrice.innerHTML = '￥' + resultPrice;
                    //循环得出搭配选项中的总价
                    inputAllPrice(resultPrice);
                }

            }

            function doTab() {
                //左侧的选项卡
                var tabBtns = document.querySelectorAll('.bottom_left .tabTitle h4');
                var tabContents = document.querySelectorAll('.bottom_left .tabContent div');

                //获取右侧的选项卡
                var tabRightBtns = document.querySelectorAll('.bottom_right .tabDetail .tabTitle li');
                var tabRightContents = document.querySelectorAll('.bottom_right .tabDetail .tabContent > div');

                //直接new一个构造函数，会执行构造函数中的内容
                new TabSwitch(tabBtns, tabContents);
                new TabSwitch(tabRightBtns, tabRightContents);

            }

            function TabSwitch(tabBtns, tabContents) {
                //将传进来的按钮保存在构造函数的实例化对象中,方便获取
                this.oBtns = tabBtns;
                this.oContents = tabContents;

                var _this = this;
                //给按钮绑定点击事件
                tabBtns.forEach(function (item, index) {
                    item.onclick = function () {
                        //所有的按钮都有点击事件，直接写的话，占用内存，构造函数就是要将公有的方法写在构造函数的原型对象上
                        _this.tabClick(index);
                    }
                })
            }

            TabSwitch.prototype.tabClick = function (index) {
                var _this = this;
                //首先点击，清空所有按钮的样式，及内容
                this.oBtns.forEach(function (item, index) {
                    item.classList.remove('active');
                    _this.oContents[index].classList.remove('active');
                })
                //然后给当前点击的按钮加上样式
                this.oBtns[index].classList.add('active');
                //并修改对应的内容
                this.oContents[index].classList.add('active');
            }

            /* 
              计算选择搭配的价格
               - 当上边的价格变动（即当点击选择类型和删除按钮的时候会有变动），左侧和右侧的初始价格也是要随之变动的。
               - 左侧的初始价格应该是上面商品的价格，右侧的价格是套餐价，需要初始价格 + 搭配的价格
                  * 创建一个数组用于保存input中的值，每次点击input,就循环数组将里面的选中的元素的价格相加
              
            */
            function chooseCollocation() {
                //获取选择搭配左侧的价格
                var leftPrice = document.querySelector(
                    '.bottom_right .chooseCollocation .conLeft span');
                var price = leftPrice.innerHTML.substr(1); //获取的是一个字符串值

                //获取选择搭配右侧的套餐价
                var rightPrice = document.querySelector('.bottom_right .chooseCollocation .conRight .price');
                // console.log(rightPrice);
                rightPrice.innerHTML = '￥' + price;

                //获取选择搭配的内容
                // 判断是哪一个有勾选，将有勾选的值加上左侧的值，赋给右边的价格
                var oCollocations = document.querySelectorAll(
                    '.bottom_right .chooseCollocation .conMid label input');
                // console.log(oCollocations);
                oCollocations.forEach(function (item, index) {
                    // 绑定点击事件
                    item.onclick = function () {
                        //获取选择搭配左侧的价格
                        var leftPrice = document.querySelector(
                            '.bottom_right .chooseCollocation .conLeft span');
                        var price = leftPrice.innerHTML.substr(1); //获取的是一个字符串值
                        // debugger
                        //循环遍历，如果有选中，就将选中的价格放到数组指定位置
                        if (item.checked) {
                            inputArr[index] = item.value;
                        } else {
                            inputArr[index] = 0;
                        }
                        //循环得出搭配选项中的总价
                        inputAllPrice(price);
                    }
                })
            }

            //封装input选中的数组，循环得出价格
            function inputAllPrice(price) {
                //获取选择搭配右侧的套餐价
                var rightPrice = document.querySelector('.bottom_right .chooseCollocation .conRight .price');

                var rPrice = null; //保存点击input后累加的值
                //每次点击的时候，都要循环数组，计算出价格
                inputArr.forEach(function (item, index) {
                    if (item) {
                        rPrice += +item;
                    }
                })
                rightPrice.innerHTML = '￥' + (+price + rPrice);
            }

            /* 
              侧边栏:
                 - 鼠标移入和移出时触发的事件mouseenter，mouseleave
                 - 获取所有的侧边栏有移入效果的元素

                 - 鼠标移入要做的事
                   是将p标签中的内容一点一点的移出来
            */
            function sideBar() {
                // debugger
                //中间部分
                var olistlis = document.querySelectorAll('#sideBar ul li');

                //获取所有的p标签
                var olistlips = document.querySelectorAll('#sideBar ul li p');
                //遍历所有li，并绑定鼠标移入事件
                olistlis.forEach(function (item, index) {
                    item.onmouseenter = function () {
                        olistlips[index].style.left = '-62px';
                    }
                    item.onmouseleave = function () {
                        olistlips[index].style.left = '35px';
                    }
                })

                //回到顶部
                var backTopI = document.querySelector('.backTop i');
                var backTopP = document.querySelector('.backTop p');
                backTopI.onmouseenter = function () {
                    backTopP.style.left = '-62px';
                }
                backTopI.onmouseleave = function () {
                    backTopP.style.left = '35px';
                }

                //上边点击右侧信息的出来
                var oSideBar = document.querySelector('#sideBar');
                var oSidemenu = document.querySelector('#sideBar .sidemenu');
                oSidemenu.onclick = function () {
                    // debugger
                    //获取class的内容，判断类名中是否存在active
                    var classValue = oSidemenu.classList.value;
                    // console.log(classValue);
                    if (classValue.indexOf('active') === -1) {
                        oSidemenu.classList.add('active');
                        oSideBar.style.right = '0px';
                    }else{
                        oSideBar.style.right = '-294px';
                        oSidemenu.classList.remove('active');
                    }
                }
            }

        })
    </script>
</body>

</html>